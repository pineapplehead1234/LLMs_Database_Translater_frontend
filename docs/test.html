<!DOCTYPE html>
<html lang="zh-CN" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>论文翻译助手 - Pro Layout</title>

    <!-- Element Plus & Vue -->
    <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css" />
    <link rel="stylesheet" href="https://unpkg.com/element-plus/theme-chalk/dark/css-vars.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/element-plus"></script>
    <script src="https://unpkg.com/@element-plus/icons-vue"></script>

    <style>
        /* =========================================
           配色系统 (VS Code 风格)
           ========================================= */
        :root {
            /* 亮色模式 */
            --bg-titlebar: #EFEFEF;
            --bg-activity: #2C2C2C;
            /* 活动栏通常保持深色或对比色 */
            --bg-sidebar: #F3F3F3;
            --bg-editor: #FFFFFF;
            --bg-tab: #ECECEC;
            --bg-tab-active: #FFFFFF;
            --border-color: #E4E4E4;
            --text-primary: #333;
            --text-secondary: #666;
            --accent-color: #007ACC;
            --icon-activity: #999;
            --icon-activity-active: #FFF;
        }

        html.dark {
            /* 暗色模式 */
            --bg-titlebar: #1E1E1E;
            /* 标题栏与编辑器同色或稍亮 */
            --bg-activity: #333333;
            /* 最左侧活动栏 */
            --bg-sidebar: #252526;
            /* 侧边栏 */
            --bg-editor: #1E1E1E;
            /* 编辑器背景 */
            --bg-tab: #2D2D2D;
            --bg-tab-active: #1E1E1E;
            --border-color: #191919;
            --text-primary: #CCCCCC;
            --text-secondary: #858585;
            --accent-color: #409EFF;
            /* Element Blue */
            --icon-activity: #757575;
            --icon-activity-active: #FFFFFF;
        }

        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            height: 100vh;
            overflow: hidden;
            background: var(--bg-titlebar);
            color: var(--text-primary);
        }

        #app {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        /* =========================================
           1. 顶部自定义标题栏 (Window Controls)
           ========================================= */
        .title-bar {
            height: 32px;
            background: var(--bg-titlebar);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding-left: 10px;
            -webkit-app-region: drag;
            /* Electron 拖拽窗口 */
            user-select: none;
            border-bottom: 1px solid var(--border-color);
        }

        .app-title {
            font-size: 12px;
            font-weight: bold;
            color: var(--text-secondary);
        }

        .window-controls {
            display: flex;
            height: 100%;
            -webkit-app-region: no-drag;
        }

        .win-btn {
            width: 40px;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--text-secondary);
            transition: background 0.2s;
            font-size: 14px;
        }

        .win-btn:hover {
            background: rgba(128, 128, 128, 0.2);
        }

        .win-btn.close:hover {
            background: #E81123;
            color: white;
        }

        /* =========================================
           2. 主工作区布局 (Activity + Sidebar + Content)
           ========================================= */
        .workspace {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        /* [NEW] 最左侧活动栏 (Activity Bar) */
        .activity-bar {
            width: 48px;
            background: var(--bg-activity);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 10px;
            border-right: 1px solid var(--border-color);
            z-index: 10;
        }

        .activity-item {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--icon-activity);
            border-left: 2px solid transparent;
            /* 选中指示条 */
            transition: all 0.2s;
        }

        .activity-item:hover {
            color: var(--icon-activity-active);
        }

        .activity-item.active {
            color: var(--icon-activity-active);
            border-left-color: var(--accent-color);
        }

        .activity-item .el-icon {
            font-size: 24px;
        }

        /* 第二列侧边栏 (Sidebar) */
        .sidebar {
            width: 250px;
            background: var(--bg-sidebar);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 10px 15px;
            font-size: 11px;
            font-weight: bold;
            text-transform: uppercase;
            color: var(--text-secondary);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* 主内容区 (Editor) */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--bg-editor);
            position: relative;
            min-width: 0;
        }

        /* =========================================
           3. Tabs 栏 & 同步按钮
           ========================================= */
        .tabs-header {
            height: 36px;
            background: var(--bg-sidebar);
            display: flex;
            align-items: center;
            border-bottom: 1px solid var(--border-color);
        }

        .tab-item {
            padding: 0 15px;
            height: 100%;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            color: var(--text-secondary);
            cursor: pointer;
            background: var(--bg-tab);
            border-right: 1px solid var(--border-color);
            min-width: 120px;
        }

        .tab-item.active {
            background: var(--bg-editor);
            color: var(--text-primary);
            border-top: 2px solid var(--accent-color);
        }

        /* [NEW] 位于 Tab 栏最右侧的工具区 */
        .tabs-actions {
            margin-left: auto;
            /* 核心：把这个区域推到最右边 */
            display: flex;
            height: 100%;
            align-items: center;
            padding-right: 10px;
        }

        /* =========================================
           4. 页面特定样式
           ========================================= */

        /* 翻译页面 (Split Pane) */
        .split-view {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        .pane {
            flex: 1;
            padding: 20px 40px;
            overflow-y: auto;
            position: relative;
        }

        .pane-en {
            border-right: 1px solid var(--border-color);
            font-family: 'Georgia', serif;
        }

        .pane-zh {
            font-family: 'PingFang SC', sans-serif;
            background: rgba(128, 128, 128, 0.03);
        }

        /* RAG 页面 */
        .rag-view {
            padding: 20px;
            height: 100%;
            overflow-y: auto;
            position: relative;
        }

        .rag-status-indicator {
            position: absolute;
            top: 20px;
            right: 20px;
            /* RAG 页面右上角 */
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            background: var(--bg-sidebar);
            padding: 4px 10px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #67C23A;
            box-shadow: 0 0 5px #67C23A;
        }

        /* 通用样式 */
        h1 {
            margin-top: 0;
            font-size: 24px;
            color: var(--accent-color);
        }

        p {
            line-height: 1.6;
            text-align: justify;
            margin-bottom: 16px;
        }

        .file-tree-item {
            padding: 4px 15px;
            cursor: pointer;
            font-size: 13px;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .file-tree-item:hover {
            background: rgba(128, 128, 128, 0.1);
            color: var(--text-primary);
        }

        .file-tree-item.active {
            background: rgba(64, 158, 255, 0.15);
            color: var(--accent-color);
        }
    </style>
</head>

<body>

    <div id="app">
        <!-- 1. 顶部标题栏 + 窗口控制 -->
        <div class="title-bar">
            <div class="app-title">PaperTranslator Pro v1.0</div>

            <div class="window-controls">
                <!-- 主题切换 -->
                <div class="win-btn" @click="toggleTheme" title="切换主题">
                    <el-icon>
                        <component :is="isDark ? 'Sunny' : 'Moon'" />
                    </el-icon>
                </div>
                <!-- 挂后台 (Minimize) -->
                <div class="win-btn" title="最小化/后台运行">
                    <el-icon>
                        <Minus />
                    </el-icon>
                </div>
                <!-- 关闭 (Close) -->
                <div class="win-btn close" title="关闭程序">
                    <el-icon>
                        <Close />
                    </el-icon>
                </div>
            </div>
        </div>

        <!-- 2. 主体工作区 -->
        <div class="workspace">

            <!-- A. [最左侧] Activity Bar -->
            <div class="activity-bar">
                <!-- 翻译模式 -->
                <div class="activity-item" :class="{ active: currentView === 'translate' }"
                    @click="currentView = 'translate'" title="文档翻译">
                    <el-icon><Document-Copy /></el-icon>
                </div>
                <!-- RAG 模式 -->
                <div class="activity-item" :class="{ active: currentView === 'rag' }" @click="currentView = 'rag'"
                    title="RAG 知识库">
                    <el-icon><Data-Line /></el-icon>
                </div>
                <!-- 设置 (推到底部) -->
                <div style="margin-top: auto;"></div>
                <div class="activity-item" :class="{ active: currentView === 'settings' }"
                    @click="currentView = 'settings'" title="设置">
                    <el-icon>
                        <Setting />
                    </el-icon>
                </div>
            </div>

            <!-- B. [中间] Sidebar (根据 Activity 变化) -->
            <div class="sidebar">

                <!-- 场景 1: 翻译模式侧边栏 -->
                <div v-if="currentView === 'translate'" style="display: flex; flex-direction: column; height: 100%;">
                    <div class="sidebar-header">
                        <span>File Explorer</span>
                        <el-icon style="cursor: pointer">
                            <Plus />
                        </el-icon>
                    </div>

                    <!-- 拖拽上传区 -->
                    <div style="padding: 10px;">
                        <div
                            style="border: 1px dashed var(--border-color); border-radius: 4px; padding: 20px; text-align: center; cursor: pointer;">
                            <span style="font-size: 12px; color: var(--text-secondary)">拖拽文件或点击上传</span>
                        </div>
                    </div>

                    <!-- 文件树 -->
                    <div style="flex: 1; overflow-y: auto;">
                        <div class="file-tree-item active"><el-icon>
                                <Document />
                            </el-icon> Docling_Tech_Report.pdf</div>
                        <div class="file-tree-item"><el-icon>
                                <Document />
                            </el-icon> Attention_Need.pdf</div>
                    </div>
                </div>

                <!-- 场景 2: RAG 模式侧边栏 -->
                <div v-if="currentView === 'rag'" style="display: flex; flex-direction: column; height: 100%;">
                    <div class="sidebar-header">
                        <span>Knowledge Sources</span>
                        <el-icon style="cursor: pointer">
                            <Refresh />
                        </el-icon>
                    </div>
                    <div style="flex: 1; overflow-y: auto; padding-top: 5px;">
                        <div class="file-tree-item"><el-icon>
                                <Collection />
                            </el-icon> Wikipedia_Dump.csv</div>
                        <div class="file-tree-item"><el-icon>
                                <Collection />
                            </el-icon> Company_Manual.docx</div>
                    </div>
                </div>

            </div>

            <!-- C. [右侧] 主编辑器区 -->
            <div class="main-content">

                <!-- 视图 1: 翻译界面 -->
                <template v-if="currentView === 'translate'">
                    <!-- Tab 栏 -->
                    <div class="tabs-header">
                        <div class="tab-item active">
                            <el-icon>
                                <Document />
                            </el-icon> Docling_Tech_Report.pdf
                            <el-icon style="margin-left: 6px; font-size: 12px">
                                <Close />
                            </el-icon>
                        </div>

                        <!-- [NEW] 位于最右侧的工具按钮 -->
                        <div class="tabs-actions">
                            <el-tooltip content="同步滚动 (Sync Scroll)" placement="bottom">
                                <el-button :type="syncEnabled ? 'primary' : ''" link
                                    @click="syncEnabled = !syncEnabled">
                                    <el-icon :style="syncEnabled ? 'font-weight: bold' : ''">
                                        <Link />
                                    </el-icon>
                                </el-button>
                            </el-tooltip>
                        </div>
                    </div>

                    <!-- 分栏内容 -->
                    <div class="split-view">
                        <!-- 原文 -->
                        <div class="pane pane-en">
                            <h1>Docling Technical Report</h1>
                            <p><strong>Version 1.0</strong></p>
                            <p>Christoph Auer, Maksym Lysak, Ahmed Nassar...</p>
                            <p><strong>Abstract:</strong> This paper introduces Docling, a novel document processing
                                engine.</p>
                        </div>
                        <!-- 译文 -->
                        <div class="pane pane-zh">
                            <h1>Docling 技术报告</h1>
                            <p><strong>版本 1.0</strong></p>
                            <p>编写者：Christoph Auer、Maksym Lysak...</p>
                            <p><strong>摘要：</strong> 本文介绍了 Docling，这是一种新颖的文档处理引擎。</p>
                        </div>
                    </div>
                </template>

                <!-- 视图 2: RAG 界面 -->
                <template v-if="currentView === 'rag'">
                    <div class="rag-view">
                        <!-- [NEW] RAG 状态指示器 (内容区右上角) -->
                        <div class="rag-status-indicator">
                            <div class="status-dot"></div>
                            <span>Service Ready</span>
                        </div>

                        <h2>RAG Playground</h2>
                        <p style="color: var(--text-secondary)">在这里调试你的向量检索效果...</p>

                        <div style="margin-top: 20px;">
                            <el-input type="textarea" :rows="4" placeholder="输入查询语句..." resize="none"></el-input>
                            <div style="margin-top: 10px;">
                                <el-button type="primary" icon="Search">Retrieve</el-button>
                            </div>
                        </div>
                    </div>
                </template>

            </div>
        </div>

    </div>

    <script>
        const { createApp, ref } = Vue;
        const {
            Sunny, Moon, Minus, Close,
            DocumentCopy, DataLine, Setting,
            Plus, Document, Refresh, Collection, Link, Search
        } = ElementPlusIconsVue;

        const app = createApp({
            setup() {
                const isDark = ref(true);
                const currentView = ref('translate'); // 'translate', 'rag', 'settings'
                const syncEnabled = ref(true); // 同步滚动状态

                const toggleTheme = () => {
                    isDark.value = !isDark.value;
                    document.documentElement.classList.toggle('dark');
                };

                return {
                    isDark,
                    currentView,
                    syncEnabled,
                    toggleTheme
                };
            }
        });

        // 注册图标
        const icons = {
            Sunny, Moon, Minus, Close,
            DocumentCopy, DataLine, Setting,
            Plus, Document, Refresh, Collection, Link, Search
        };
        for (const [key, component] of Object.entries(icons)) {
            app.component(key, component);
        }

        app.use(ElementPlus);
        app.mount('#app');
    </script>

</body>

</html>